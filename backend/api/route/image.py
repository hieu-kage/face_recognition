from fastapi import APIRouterfrom pydantic import BaseModelfrom typing import Listimport numpy as npimport cv2from src.utils import Attendanceimport base64router = APIRouter(prefix="/image", tags=["Image"])attendance = Attendance()class ImageRequest(BaseModel):    image_base64: str  # Ảnh gửi từ frontend dưới dạng base64@router.post("/predict")def predict(request: ImageRequest):    try:        image_data = base64.b64decode(request.image_base64.split(',')[-1])        np_arr = np.frombuffer(image_data, np.uint8)        frame = cv2.imdecode(np_arr, cv2.IMREAD_COLOR)        print(attendance.known_names)        if frame is None:            return {"error": "Không đọc được ảnh"}        processed_frame, names = attendance.process_frame(frame)        return {"status": "success", "names": names}    except Exception as e:        return {"error": str(e)}